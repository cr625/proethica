<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Static Analysis - AI Ethics in Engineering Practice: Engineer A's Dilemma</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .header {
            background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
            color: white;
            padding: 30px;
            margin: -40px -40px 30px -40px;
            border-radius: 10px 10px 0 0;
            text-align: center;
        }
        h1 {
            margin: 0;
            font-size: 24px;
        }
        .metadata {
            font-size: 14px;
            opacity: 0.9;
        }
        .timeline-item {
            margin-bottom: 40px;
            padding-left: 20px;
            border-left: 3px solid #dee2e6;
        }
        .event {
            border-left-color: #17a2b8;
        }
        .decision {
            border-left-color: #ffc107;
        }
        .option {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .arguments-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 15px;
        }
        .arguments-for, .arguments-against {
            padding: 15px;
            border-radius: 5px;
        }
        .arguments-for {
            background: rgba(40, 167, 69, 0.1);
            border: 1px solid rgba(40, 167, 69, 0.3);
        }
        .arguments-against {
            background: rgba(220, 53, 69, 0.1);
            border: 1px solid rgba(220, 53, 69, 0.3);
        }
        .arguments-for h4 {
            color: #28a745;
            margin-top: 0;
        }
        .arguments-against h4 {
            color: #dc3545;
            margin-top: 0;
        }
        .alert {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
        .conclusion {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 30px;
            border-radius: 8px;
            margin-top: 40px;
        }
        ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        .references {
            font-size: 12px;
            color: #6c757d;
            margin-top: 10px;
        }
        .references-section {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 30px;
            border-radius: 8px;
            margin-top: 40px;
        }
        .references-section h3 {
            color: #495057;
            margin-top: 25px;
        }
        .references-section h3:first-of-type {
            margin-top: 15px;
        }
        .references-section a {
            color: #007bff;
            text-decoration: none;
        }
        .references-section a:hover {
            text-decoration: underline;
        }
        .weak-ref {
            color: #6c757d;
            font-style: italic;
        }
        .code-ref {
            position: relative;
            cursor: help;
            border-bottom: 1px dotted #007bff;
            display: inline-block;
        }
        .code-ref::after {
            content: "üîç";
            font-size: 0.8em;
            margin-left: 2px;
            opacity: 0.7;
        }
        .tooltip {
            position: absolute;
            background: #2c3e50;
            color: white;
            padding: 12px;
            border-radius: 6px;
            font-size: 0.9em;
            line-height: 1.4;
            min-width: 300px;
            max-width: 400px;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
            white-space: normal;
        }
        .tooltip.show {
            opacity: 1;
        }
        .tooltip::before {
            content: "";
            position: absolute;
            top: -8px;
            left: 20px;
            border: 8px solid transparent;
            border-bottom-color: #2c3e50;
        }
        .tooltip-header {
            font-weight: bold;
            color: #3498db;
            margin-bottom: 6px;
        }
        .tooltip-footer {
            margin-top: 8px;
            font-size: 0.8em;
            color: #bdc3c7;
            border-top: 1px solid #34495e;
            padding-top: 6px;
        }
        @media print {
            body {
                background: white;
            }
            .container {
                box-shadow: none;
                padding: 20px;
            }
            .header {
                background: #6c757d !important;
                print-color-adjust: exact;
                -webkit-print-color-adjust: exact;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>AI Ethics in Engineering Practice: Engineer A's Dilemma</h1>
            <p class="metadata">Case Reference: NSPE BER Case 24-02<br>Generated: 2025-07-27T11:41:44.138752</p>
        </div>
        
        <h2>Overview</h2>
        <p>Engineer A faces ethical decisions about using AI tools for environmental engineering reports and design documents.</p>
        <p><strong>Engineer A is the primary agent facing these ethical decisions.</strong></p>
        
        <h2>Timeline Analysis</h2>
        
            <div class="timeline-item event">
                <h3>üìÖ Project Assignment</h3>
                <p><strong>Time:</strong> Day 0</p>
                <p>Client W retains Engineer A's environmental engineering firm to prepare a comprehensive report on organic compound contamination and design documents for groundwater infrastructure modifications.</p>
                <p><em>Engineer A is an experienced environmental engineer with PE license. The project requires both strong technical analysis and professional report writing.</em></p>
            </div>
            <div class="timeline-item event">
                <h3>üìÖ Loss of Writing Support</h3>
                <p><strong>Time:</strong> Day 5</p>
                <p>Engineer B, who previously provided writing guidance, announces retirement.</p>
                <p><em>Engineer A recognizes a gap in writing support but remains confident in technical expertise.</em></p>
            </div>
            <div class="timeline-item event">
                <h3>üìÖ AI Tool Discovery</h3>
                <p><strong>Time:</strong> Day 10</p>
                <p>Engineer A discovers open-source AI writing and drafting tools that could assist with report generation.</p>
                <p><em>The tools promise to help with professional writing while maintaining technical accuracy.</em></p>
            </div>
            <div class="timeline-item decision">
                <h3>‚öñÔ∏è Decision Point 1: AI-Generated Report Text</h3>
                <p><strong>Time:</strong> Day 12</p>
                <div class="alert">
                    <strong>Ethical Question:</strong> Should Engineer A use AI to generate the report text, even with thorough technical review?
                </div>
                <p><strong>Context:</strong> Engineer A considers using AI to create the report narrative, planning to input client data and thoroughly review all output.</p>
                <h4>Ethical Analysis of Options:</h4>
                
                <div class="option">
                    <h4>Option 1: Use AI with Comprehensive Technical Review</h4>
                    <p>Generate report text using AI, then conduct thorough technical review to ensure accuracy and completeness.</p>
                    <div class="arguments-grid">
                        <div class="arguments-for">
                            <h4>Arguments For:</h4>
                            <ul><li>Maintains technical competence through careful review process <strong>[I.2]</strong></li><li>Leverages technology to improve efficiency and writing quality <em class='weak-ref'>[III.8.a]</em></li><li>Ensures accuracy through professional verification <strong>[II.2.a]</strong></li><li>Allows focus on technical analysis rather than writing mechanics <em class='weak-ref'>[I.2]</em></li></ul>
                        </div>
                        <div class="arguments-against">
                            <h4>Arguments Against:</h4>
                            <ul><li>May violate client confidentiality by sharing data with AI system <strong>[II.1.c]</strong></li><li>Risks not properly attributing AI-generated content <strong>[III.9]</strong></li><li>Could miss nuanced technical issues in AI output <strong>[I.2, II.2.a]</strong></li><li>May not fully understand AI's reasoning process <strong>[II.2.b]</strong></li></ul>
                        </div>
                    </div>
                    <div class="references">Supporting Codes: I.2 - Perform services only in areas of competence | Relevant Cases: BER Case 90-6 - Computer tools acceptable with oversight</div>
                </div>
                <div class="option">
                    <h4>Option 2: Avoid AI Due to Confidentiality Concerns</h4>
                    <p>Reject AI use because it requires sharing client's confidential data with external systems.</p>
                    <div class="arguments-grid">
                        <div class="arguments-for">
                            <h4>Arguments For:</h4>
                            <ul><li>Protects client confidentiality absolutely <strong>[II.1.c]</strong></li><li>Maintains full control over work product <strong>[II.2.b]</strong></li><li>Avoids potential citation and attribution issues <strong>[III.9]</strong></li><li>Ensures personal understanding of all content <strong>[I.2, II.2.a]</strong></li></ul>
                        </div>
                        <div class="arguments-against">
                            <h4>Arguments Against:</h4>
                            <ul><li>May produce lower quality writing without support <em class='weak-ref'>[I.1]</em></li><li>Increases time and cost for client <em class='weak-ref'>[I.1]</em></li><li>Misses opportunity to leverage beneficial technology <em class='weak-ref'>[III.8.a]</em></li><li>Could impact project timeline <em class='weak-ref'>[I.1]</em></li></ul>
                        </div>
                    </div>
                    <div class="references">Supporting Codes: II.1.c - Maintain client confidentiality, III.9 - Give proper credit</div>
                </div>
                <div class="option">
                    <h4>Option 3: Treat AI as Standard Professional Tool</h4>
                    <p>Use AI freely as just another writing tool like spell-check or grammar assistance.</p>
                    <div class="arguments-grid">
                        <div class="arguments-for">
                            <h4>Arguments For:</h4>
                            <ul><li>Embraces technological advancement in profession <em class='weak-ref'>[III.8.a]</em></li><li>Improves efficiency and productivity <em class='weak-ref'>[I.1]</em></li><li>Similar to accepted CAD and analysis software <em class='weak-ref'>[II.2.a]</em></li><li>Enhances report quality and consistency <em class='weak-ref'>[I.1]</em></li></ul>
                        </div>
                        <div class="arguments-against">
                            <h4>Arguments Against:</h4>
                            <ul><li>May oversimplify ethical considerations <strong>[I.5, III.3]</strong></li><li>Ignores unique aspects of AI technology <strong>[I.2, II.2.a]</strong></li><li>Could lead to over-reliance on AI <strong>[II.2.b]</strong></li><li>Minimizes confidentiality concerns <strong>[II.1.c]</strong></li></ul>
                        </div>
                    </div>
                    <div class="references">Relevant Cases: BER Case 98-3 - Software tools part of practice</div>
                </div>
                <div class="alert">
                    <strong>Analysis Summary:</strong> This decision involves balancing technological efficiency with professional responsibilities including confidentiality, attribution, and maintaining competence. The key tension is between leveraging AI capabilities and ensuring full professional oversight.
                </div>
            </div>
            <div class="timeline-item event">
                <h3>üìÖ Report Creation Process</h3>
                <p><strong>Time:</strong> Day 15</p>
                <p>Engineer A proceeds with chosen approach for report creation, incorporating client data and technical analysis.</p>
                <p><em>The report addresses complex contamination patterns and remediation strategies.</em></p>
            </div>
            <div class="timeline-item decision">
                <h3>‚öñÔ∏è Decision Point 2: AI-Assisted Design Documents</h3>
                <p><strong>Time:</strong> Day 18</p>
                <div class="alert">
                    <strong>Ethical Question:</strong> Should Engineer A use AI drafting tools for engineering design documents with high-level review?
                </div>
                <p><strong>Context:</strong> Engineer A considers using AI-assisted drafting for groundwater infrastructure modifications, planning only high-level review before sealing.</p>
                <h4>Ethical Analysis of Options:</h4>
                
                <div class="option">
                    <h4>Option 1: Use AI Drafting with High-Level Review</h4>
                    <p>Employ AI drafting tools for design documents, conducting high-level review before applying PE seal.</p>
                    <div class="arguments-grid">
                        <div class="arguments-for">
                            <h4>Arguments For:</h4>
                            <ul><li>Increases design productivity and consistency <em class='weak-ref'>[I.1]</em></li><li>AI can help catch standard design issues <em class='weak-ref'>[I.1]</em></li><li>Allows focus on critical design decisions <strong>[I.2]</strong></li><li>Similar to using advanced CAD systems <em class='weak-ref'>[II.2.a]</em></li></ul>
                        </div>
                        <div class="arguments-against">
                            <h4>Arguments Against:</h4>
                            <ul><li>May not maintain 'responsible charge' over work <strong>[II.2.b]</strong></li><li>High-level review insufficient for sealed documents <strong>[II.2.b]</strong></li><li>Risks missing critical design details <strong>[I.2, II.2.a]</strong></li><li>Could violate requirements for personal direction <strong>[II.2.b]</strong></li></ul>
                        </div>
                    </div>
                    <div class="references">Supporting Codes: II.2.b - Documents under personal direction/control | Relevant Cases: NSPE Position Statement 10-1778 - Responsible Charge</div>
                </div>
                <div class="option">
                    <h4>Option 2: Maintain Full Personal Control</h4>
                    <p>Create all design documents personally or under direct supervision to maintain responsible charge.</p>
                    <div class="arguments-grid">
                        <div class="arguments-for">
                            <h4>Arguments For:</h4>
                            <ul><li>Ensures complete understanding of design details <strong>[I.2, II.2.a]</strong></li><li>Maintains required 'responsible charge' <strong>[II.2.b]</strong></li><li>Fulfills PE seal requirements fully <strong>[II.2.b, III.8.a]</strong></li><li>Provides direct control over critical decisions <strong>[II.2.b]</strong></li></ul>
                        </div>
                        <div class="arguments-against">
                            <h4>Arguments Against:</h4>
                            <ul><li>May slow design process significantly <em class='weak-ref'>[I.1]</em></li><li>Could miss benefits of AI error checking <em class='weak-ref'>[I.1]</em></li><li>Increases project costs <em class='weak-ref'>[I.1]</em></li><li>May seem outdated to tech-forward clients <em class='weak-ref'>[III.8.a]</em></li></ul>
                        </div>
                    </div>
                    <div class="references">Supporting Codes: II.2.b - Personal direction required for sealed work</div>
                </div>
                <div class="option">
                    <h4>Option 3: Use AI with Comprehensive Detail Review</h4>
                    <p>Use AI drafting but implement thorough, detailed review process before sealing.</p>
                    <div class="arguments-grid">
                        <div class="arguments-for">
                            <h4>Arguments For:</h4>
                            <ul><li>Balances efficiency with responsibility <strong>[I.2, II.2.b]</strong></li><li>Maintains professional oversight <strong>[II.2.a, II.2.b]</strong></li><li>Leverages AI while ensuring quality <strong>[I.2]</strong></li><li>Could establish new best practices <em class='weak-ref'>[III.8.a]</em></li></ul>
                        </div>
                        <div class="arguments-against">
                            <h4>Arguments Against:</h4>
                            <ul><li>Requires significant time for detailed review <em class='weak-ref'>[I.1]</em></li><li>May negate efficiency benefits <em class='weak-ref'>[I.1]</em></li><li>Still questions about 'personal creation' <strong>[II.2.b]</strong></li><li>Review process must be extremely thorough <strong>[I.2, II.2.a]</strong></li></ul>
                        </div>
                    </div>
                    <div class="references">Supporting Codes: I.2 - Competence in review process | Relevant Cases: BER Case 90-6 - Proper oversight critical</div>
                </div>
                <div class="alert">
                    <strong>Analysis Summary:</strong> This decision centers on maintaining 'responsible charge' over sealed engineering documents. The tension is between efficiency gains from AI drafting and the professional requirement for personal direction and control over work bearing the PE seal.
                </div>
            </div>
            <div class="timeline-item event">
                <h3>üìÖ Design Document Creation</h3>
                <p><strong>Time:</strong> Day 22</p>
                <p>Engineer A completes the engineering design documents for groundwater infrastructure modifications.</p>
                <p><em>Documents include detailed specifications and drawings requiring PE seal.</em></p>
            </div>
            <div class="timeline-item decision">
                <h3>‚öñÔ∏è Decision Point 3: Disclosure of AI Usage</h3>
                <p><strong>Time:</strong> Day 25</p>
                <div class="alert">
                    <strong>Ethical Question:</strong> Should Engineer A disclose the use of AI tools to Client W?
                </div>
                <p><strong>Context:</strong> With project nearing completion, Engineer A considers whether to inform the client about any AI tool usage in creating deliverables.</p>
                <h4>Ethical Analysis of Options:</h4>
                
                <div class="option">
                    <h4>Option 1: Voluntary Transparency About AI Role</h4>
                    <p>Proactively disclose AI usage even without contractual requirement, emphasizing professional oversight.</p>
                    <div class="arguments-grid">
                        <div class="arguments-for">
                            <h4>Arguments For:</h4>
                            <ul><li>Builds trust through transparency <strong>[I.5, III.3]</strong></li><li>Allows client to make informed decisions <strong>[I.5]</strong></li><li>Demonstrates ethical leadership <strong>[I.5, III.3]</strong></li><li>May strengthen client relationship <em class='weak-ref'>[I.1]</em></li></ul>
                        </div>
                        <div class="arguments-against">
                            <h4>Arguments Against:</h4>
                            <ul><li>Not contractually required <em class='weak-ref'>[III.8.a]</em></li><li>May cause unnecessary client concern <em class='weak-ref'>[I.1]</em></li><li>Could be seen as admitting inadequacy <em class='weak-ref'>[I.5]</em></li><li>Might complicate project acceptance <em class='weak-ref'>[I.1]</em></li></ul>
                        </div>
                    </div>
                    <div class="references">Supporting Codes: I.5 - Avoid deceptive acts, III.3 - Avoid deceiving public</div>
                </div>
                <div class="option">
                    <h4>Option 2: No Disclosure - Standard Tools</h4>
                    <p>Treat AI as standard professional software not requiring special disclosure.</p>
                    <div class="arguments-grid">
                        <div class="arguments-for">
                            <h4>Arguments For:</h4>
                            <ul><li>Consistent with software tool precedents <em class='weak-ref'>[III.8.a]</em></li><li>Avoids creating unnecessary concerns <em class='weak-ref'>[I.1]</em></li><li>Maintains focus on deliverable quality <strong>[I.2]</strong></li><li>Follows established practices <em class='weak-ref'>[III.8.a]</em></li></ul>
                        </div>
                        <div class="arguments-against">
                            <h4>Arguments Against:</h4>
                            <ul><li>May miss opportunity for transparency <strong>[I.5, III.3]</strong></li><li>Client might prefer to know methodology <strong>[I.5]</strong></li><li>Could be discovered later <strong>[I.5, III.3]</strong></li><li>Evolving technology may need new standards <em class='weak-ref'>[III.8.a]</em></li></ul>
                        </div>
                    </div>
                    <div class="references">Relevant Cases: BER Case 98-3 - No disclosure for CD-ROM tools</div>
                </div>
                <div class="option">
                    <h4>Option 3: Disclosure Only If Substantial AI Role</h4>
                    <p>Disclose only if AI played a substantial role beyond basic assistance.</p>
                    <div class="arguments-grid">
                        <div class="arguments-for">
                            <h4>Arguments For:</h4>
                            <ul><li>Balances transparency with practicality <strong>[I.5, I.2]</strong></li><li>Recognizes degrees of AI involvement <strong>[I.2, II.2.a]</strong></li><li>Allows professional judgment <strong>[I.2]</strong></li><li>Flexible approach for evolving technology <em class='weak-ref'>[III.8.a]</em></li></ul>
                        </div>
                        <div class="arguments-against">
                            <h4>Arguments Against:</h4>
                            <ul><li>Requires defining 'substantial role' <strong>[I.5, III.3]</strong></li><li>Subjective determination needed <strong>[I.5]</strong></li><li>May lead to inconsistent practices <strong>[III.3]</strong></li><li>Could create gray areas <strong>[I.5, III.3]</strong></li></ul>
                        </div>
                    </div>
                    <div class="references">Supporting Codes: I.5 - Truthfulness in professional reports</div>
                </div>
                <div class="alert">
                    <strong>Analysis Summary:</strong> This decision addresses transparency and disclosure obligations regarding AI tool usage. The key consideration is balancing the absence of explicit disclosure requirements with principles of honesty and the evolving nature of AI technology in professional practice.
                </div>
            </div>
            <div class="timeline-item event">
                <h3>üìÖ Project Delivery</h3>
                <p><strong>Time:</strong> Day 30</p>
                <p>Engineer A delivers the comprehensive report and engineering design documents to Client W.</p>
                <p><em>All deliverables meet technical requirements and are submitted on schedule.</em></p>
            </div>
        
        <div class="conclusion">
            <h2>Analysis Conclusion</h2>
            <p>This static analysis has presented the ethical considerations for each decision point without revealing predetermined outcomes. The goal is to encourage independent ethical reasoning based on professional codes, precedents, and stakeholder impacts.</p>
            
            <h3>Key Themes Across All Decisions:</h3>
            <ul>
                <li>Balancing technological innovation with professional responsibilities</li>
                <li>Maintaining competence and responsible charge over AI-assisted work</li>
                <li>Navigating confidentiality concerns with cloud-based AI tools</li>
                <li>Determining appropriate transparency about AI usage</li>
            </ul>
        </div>
        
        <div class="references-section">
            <h2>References</h2>
            
            <h3>NSPE Code of Ethics</h3>
            <p>The ethical analysis references the following sections of the 
            <a href="https://www.nspe.org/career-growth/ethics/code-ethics" target="_blank">NSPE Code of Ethics for Engineers</a>:</p>
            <ul>
                <li><strong>I.2</strong> - Engineers shall perform services only in the areas of their competence</li>
                <li><strong>I.5</strong> - Engineers shall avoid deceptive acts</li>
                <li><strong>II.1.c</strong> - Engineers shall not disclose, without consent, confidential information</li>
                <li><strong>II.2.b</strong> - Engineers shall not affix their signatures to plans or documents not prepared under their direction and control</li>
                <li><strong>III.3</strong> - Engineers shall avoid all conduct or practice that deceives the public</li>
                <li><strong>III.9</strong> - Engineers shall give credit for engineering work to those to whom credit is due</li>
            </ul>
            
            <h3>NSPE Board of Ethical Review Cases</h3>
            <p>The following precedent cases inform this analysis:</p>
            <ul>
                <li><strong>BER Case 24-02</strong> - Use of Artificial Intelligence in Engineering Practice 
                    <em>(This is the case being analyzed)</em></li>
                <li><strong>BER Case 90-6</strong> - Use of Computer-Aided Design and Drafting (CADD) 
                    <em>(Established that engineers can use computer tools with proper oversight)</em></li>
                <li><strong>BER Case 98-3</strong> - Use of CD-ROM Design Tools 
                    <em>(Software tools are part of practice and don't require client disclosure)</em></li>
            </ul>
            <p>View all NSPE BER cases at: 
            <a href="https://www.nspe.org/career-growth/ethics/board-ethical-review-cases" target="_blank">
                NSPE Board of Ethical Review Cases
            </a></p>
            
            <h3>NSPE Position Statements</h3>
            <ul>
                <li><strong>Position Statement 10-1778</strong> - Responsible Charge 
                    <em>(Defines requirements for maintaining responsible charge over engineering work)</em></li>
            </ul>
        </div>
    </div>

    <script>
        // NSPE Code of Ethics text data
        const nspeCodeText = {
            'I.1': {
                title: 'Fundamental Canon I.1',
                text: 'Hold paramount the safety, health, and welfare of the public.',
                section: 'I. Fundamental Canons'
            },
            'I.2': {
                title: 'Fundamental Canon I.2',
                text: 'Perform services only in areas of their competence.',
                section: 'I. Fundamental Canons'
            },
            'I.5': {
                title: 'Fundamental Canon I.5',
                text: 'Avoid deceptive acts.',
                section: 'I. Fundamental Canons'
            },
            'II.1.c': {
                title: 'Rules of Practice II.1.c',
                text: 'Do not disclose client/employer information without consent or legal obligation.',
                section: 'II. Rules of Practice - Hold paramount the safety, health, and welfare of the public'
            },
            'II.2.a': {
                title: 'Rules of Practice II.2.a',
                text: 'Accept only qualified assignments.',
                section: 'II. Rules of Practice - Perform services only in areas of their competence'
            },
            'II.2.b': {
                title: 'Rules of Practice II.2.b',
                text: 'Do not sign off on work outside area of expertise.',
                section: 'II. Rules of Practice - Perform services only in areas of their competence'
            },
            'III.3': {
                title: 'Professional Obligations III.3',
                text: 'Engineers shall avoid conduct that deceives the public. Avoid material misrepresentations or omissions. Advertise truthfully. Acknowledge contributions of others.',
                section: 'III. Professional Obligations'
            },
            'III.8.a': {
                title: 'Professional Obligations III.8.a',
                text: 'Follow registration laws.',
                section: 'III. Professional Obligations - Accept responsibility for their actions'
            },
            'III.9': {
                title: 'Professional Obligations III.9',
                text: 'Engineers shall credit others appropriately. Name individuals responsible for work when possible. Respect proprietary rights of clients.',
                section: 'III. Professional Obligations'
            }
        };

        // Tooltip functionality
        let currentTooltip = null;

        function createTooltip(element, codes) {
            const tooltip = document.createElement('div');
            tooltip.className = 'tooltip';
            
            let content = '';
            codes.forEach((code, index) => {
                const codeData = nspeCodeText[code];
                if (codeData) {
                    if (index > 0) content += '<br><br>';
                    content += `<div class="tooltip-header">${codeData.title}</div>`;
                    content += `<div>${codeData.text}</div>`;
                }
            });
            
            content += `<div class="tooltip-footer">üîç Click code reference to research further</div>`;
            tooltip.innerHTML = content;
            
            document.body.appendChild(tooltip);
            return tooltip;
        }

        function positionTooltip(tooltip, element) {
            const rect = element.getBoundingClientRect();
            const tooltipRect = tooltip.getBoundingClientRect();
            
            let top = rect.bottom + window.scrollY + 10;
            let left = rect.left + window.scrollX;
            
            // Adjust if tooltip would go off screen
            if (left + tooltipRect.width > window.innerWidth) {
                left = window.innerWidth - tooltipRect.width - 20;
            }
            
            if (top + tooltipRect.height > window.innerHeight + window.scrollY) {
                top = rect.top + window.scrollY - tooltipRect.height - 10;
                // Flip arrow to bottom
                tooltip.style.setProperty('--arrow-position', 'bottom');
            }
            
            tooltip.style.top = top + 'px';
            tooltip.style.left = left + 'px';
        }

        function showTooltip(element, codes) {
            hideTooltip();
            currentTooltip = createTooltip(element, codes);
            positionTooltip(currentTooltip, element);
            
            // Use setTimeout to ensure the element is rendered before showing
            setTimeout(() => {
                currentTooltip.classList.add('show');
            }, 10);
        }

        function hideTooltip() {
            if (currentTooltip) {
                currentTooltip.remove();
                currentTooltip = null;
            }
        }

        // Initialize tooltips when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Convert all code references to interactive elements
            document.querySelectorAll('strong, em.weak-ref').forEach(element => {
                const text = element.textContent;
                const codeMatch = text.match(/\[([I]+\.[\d\.a-z]+(?:,\s*[I]+\.[\d\.a-z]+)*)\]/);
                
                if (codeMatch) {
                    const codes = codeMatch[1].split(',').map(code => code.trim());
                    const beforeText = text.substring(0, codeMatch.index);
                    const codeText = codeMatch[0];
                    const afterText = text.substring(codeMatch.index + codeMatch[0].length);
                    
                    // Create new HTML with interactive code reference
                    const newHTML = beforeText + 
                        `<span class="code-ref" data-codes="${codes.join(',')}">${codeText}</span>` + 
                        afterText;
                    
                    element.innerHTML = newHTML;
                }
            });
            
            // Add event listeners to code references
            document.querySelectorAll('.code-ref').forEach(element => {
                const codes = element.dataset.codes.split(',');
                
                element.addEventListener('mouseenter', () => {
                    showTooltip(element, codes);
                });
                
                element.addEventListener('mouseleave', () => {
                    setTimeout(hideTooltip, 300); // Small delay to allow moving to tooltip
                });
                
                element.addEventListener('click', () => {
                    // Future: Navigate to detailed code research page
                    window.open('https://www.nspe.org/career-growth/ethics/code-ethics', '_blank');
                });
            });
            
            // Hide tooltip when scrolling
            window.addEventListener('scroll', hideTooltip);
        });
    </script>
</body>
</html>