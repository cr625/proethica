<!-- Conditions Tab Content -->
{% if ontology.is_editable %}
<button class="btn btn-primary add-entity-btn" data-entity-type="condition">
    <i class="bi bi-plus"></i> Add Condition
</button>
{% endif %}

{% if entities and entities.entities.conditions and entities.entities.conditions|length > 0 %}
<div class="row">
    {% for entity in entities.entities.conditions %}
    <div class="col-md-6 col-lg-4">
        <div class="card entity-item {% if not is_editable(entity) %}non-editable{% endif %}" 
             data-entity-id="{{ entity.id }}" 
             data-entity-type="condition">
            <!-- View Mode -->
            <div class="card-view-mode">
                <div class="card-header">
                    <span>{{ entity.label }}</span>
                    {% if is_editable(entity) and ontology.is_editable %}
                    <button class="btn btn-sm btn-outline-primary edit-entity-btn">
                        <i class="bi bi-pencil"></i> Edit
                    </button>
                    {% endif %}
                </div>
                <div class="card-body">
                    <p class="card-text">{{ entity.description }}</p>
                    <div class="entity-origin">
                        Origin: {{ get_entity_origin(entity) }}
                    </div>
                    <div class="entity-uri">
                        ID: {{ entity.id }}
                    </div>
                </div>
            </div>
            
            <!-- Edit Mode -->
            {% if is_editable(entity) and ontology.is_editable %}
            <div class="card-edit-mode">
                <div class="card-header bg-primary text-white">
                    Edit Condition
                </div>
                <div class="card-body">
                    <form class="entity-edit-form" data-entity-id="{{ entity.id }}" data-entity-type="condition">
                        <div class="mb-3">
                            <label for="label-{{ entity.id }}">Label</label>
                            <input type="text" class="form-control" id="label-{{ entity.id }}" name="label" value="{{ entity.label }}" required>
                            <div class="validation-error"></div>
                        </div>
                        <div class="mb-3">
                            <label for="description-{{ entity.id }}">Description</label>
                            <textarea class="form-control" id="description-{{ entity.id }}" name="description" rows="3" required>{{ entity.description }}</textarea>
                            <div class="validation-error"></div>
                        </div>
                        <div class="mb-3">
                            <label for="parent-{{ entity.id }}">Parent Class</label>
                            
                <!-- Parent class debug:
                     Entity: {{ entity.label }}
                     Parent Class: {{ entity.parent_class }}
                -->
                <select class="form-control" id="parent-{{ entity.id }}" name="parent_class" required>
                                {% for parent in get_valid_parents('condition') %}
                                <option value="{{ parent.id }}" {% if entity.parent_class == parent.id|string %}selected{% endif %}>
                        
                                    {{ parent.label }}
                                
                    </option>
                                {% endfor %}
                            </select>
                
                            <div class="validation-error"></div>
                        </div>
                        <div class="d-flex justify-content-between">
                            <button type="submit" class="btn btn-success save-entity-btn">Save</button>
                            <button type="button" class="btn btn-secondary cancel-edit-btn">Cancel</button>
                            <button type="button" class="btn btn-danger delete-entity-btn">Delete</button>
                        </div>
                    </form>
                </div>
            </div>
            {% endif %}
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="empty-tab-message">
    <p>No conditions defined in this ontology.</p>
</div>
{% endif %}
