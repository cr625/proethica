{
    "version": "0.2.0",
    "configurations": [
        {
            "name": "MCP Server - Local",
            "type": "debugpy",
            "request": "launch",
            "python": "${workspaceFolder}/venv/bin/python",
            "program": "${workspaceFolder}/mcp/run_enhanced_mcp_server_with_guidelines.py",
            "console": "integratedTerminal",
            "justMyCode": true,
            "envFile": "${workspaceFolder}/.env",
            "env": {
                "USE_MOCK_GUIDELINE_RESPONSES": "false",
                "FORCE_MOCK_LLM": "false",
                "ENVIRONMENT": "development",
                "DEBUG": "true",
                "MCP_SERVER_PORT": "5001",
                "SQLALCHEMY_DATABASE_URI": "postgresql://postgres:PASS@localhost:5433/ai_ethical_dm",
                "SQLALCHEMY_TRACK_MODIFICATIONS": "false",
                "PYTHONPATH": "${workspaceFolder}",
                "PATH": "${env:PATH}",
                // Embedding + LLM toggles (keys live in .env)
                "DISABLE_LOCAL_EMBEDDINGS": "false",
                "ALLOW_HF_DOWNLOAD": "true",
                "EMBEDDINGS_DEVICE": "cpu",
                "EMBEDDING_PROVIDER_PRIORITY": "openai,anthropic,google,local",
                "EMBEDDING_MODEL": "text-embedding-3-small",
                // Optional model selectors (reads ANTHROPIC_API_KEY/OPENAI_API_KEY from .env)
                "ANTHROPIC_MODEL": "claude-sonnet-4-20250514",
                // Intermediate extraction toggles
                "ENABLE_OBLIGATIONS_EXTRACTION": "true",
                "ENABLE_PRINCIPLES_EXTRACTION": "true"
            },
            "cwd": "${workspaceFolder}"
        },
        {
            "name": "Flask App - Local MCP",
            "type": "debugpy",
            "request": "launch",
            "python": "${workspaceFolder}/venv/bin/python",
            "program": "${workspaceFolder}/run.py",
            "args": ["--port", "3333", "--environment", "development"],
            "console": "integratedTerminal",
            "justMyCode": true,
            "envFile": "${workspaceFolder}/.env",
            "env": {
                "USE_MOCK_GUIDELINE_RESPONSES": "false",
                "FORCE_MOCK_LLM": "false",
                "ENVIRONMENT": "development",
                "DEBUG": "true",
                "BYPASS_AUTH": "true",
                "MCP_SERVER_PORT": "5001",
                "MCP_SERVER_URL": "http://localhost:5001",
                "SQLALCHEMY_DATABASE_URI": "postgresql://postgres:PASS@localhost:5433/ai_ethical_dm",
                "SQLALCHEMY_TRACK_MODIFICATIONS": "false",
                "PYTHONPATH": "${workspaceFolder}",
                "PATH": "${env:PATH}",
                // Embedding + LLM toggles (keys live in .env)
                "DISABLE_LOCAL_EMBEDDINGS": "false",
                "ALLOW_HF_DOWNLOAD": "true",
                "EMBEDDINGS_DEVICE": "cpu",
                "EMBEDDING_PROVIDER_PRIORITY": "openai,anthropic,google,local",
                "EMBEDDING_MODEL": "text-embedding-3-small",
                // Optional model selectors (reads ANTHROPIC_API_KEY/OPENAI_API_KEY from .env)
                "ANTHROPIC_MODEL": "claude-sonnet-4-20250514",
                // Intermediate extraction toggles
                "ENABLE_OBLIGATIONS_EXTRACTION": "true",
                "ENABLE_PRINCIPLES_EXTRACTION": "true"
            },
        },
        {
            "name": "Flask App - Production MCP",
            "type": "debugpy",
            "request": "launch",
            "python": "${workspaceFolder}/venv/bin/python",
            "program": "${workspaceFolder}/run.py",
            "args": ["--port", "3333", "--environment", "development"],
            "console": "integratedTerminal",
            "justMyCode": true,
            "envFile": "${workspaceFolder}/.env",
            "env": {
                "USE_MOCK_GUIDELINE_RESPONSES": "false",
                "FORCE_MOCK_LLM": "false",
                "ENVIRONMENT": "development",
                "DEBUG": "true",
                "BYPASS_AUTH": "true",
                "MCP_SERVER_URL": "https://mcp.proethica.org",
                "MCP_AUTH_TOKEN": "nGkmBr1jlyYLi8ZKCeXEFMMD5KddiCMzAahi7j5G43c",
                "SQLALCHEMY_DATABASE_URI": "postgresql://postgres:PASS@localhost:5433/ai_ethical_dm",
                "SQLALCHEMY_TRACK_MODIFICATIONS": "false",
                "PYTHONPATH": "${workspaceFolder}",
                "PATH": "${env:PATH}"
            }
        },
        {
            "name": "Python: Current File",
            "type": "debugpy",
            "request": "launch",
            "python": "${workspaceFolder}/venv/bin/python",
            "program": "${file}",
            "console": "integratedTerminal",
            "justMyCode": true,
            "envFile": "${workspaceFolder}/.env",
            "env": {
                "USE_MOCK_GUIDELINE_RESPONSES": "false",
                "ENVIRONMENT": "development",
                "BYPASS_AUTH": "true",
                "MCP_SERVER_URL": "http://localhost:5001",
                "SQLALCHEMY_DATABASE_URI": "postgresql://postgres:PASS@localhost:5433/ai_ethical_dm",
                "SQLALCHEMY_TRACK_MODIFICATIONS": "false",
                "PYTHONPATH": "${workspaceFolder}",
                "PATH": "${env:PATH}"
            }
        }
    ],
    "compounds": [
        {
            "name": "Full Stack: MCP + Flask",
            "configurations": ["MCP Server - Local", "Flask App - Local MCP"],
            "stopAll": true,
            "preLaunchTask": "kill-python-processes"
        }
    ]
}