@prefix : <http://proethica.org/ontology/intermediate#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix xml: <http://www.w3.org/XML/1998/namespace> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix dc: <http://purl.org/dc/elements/1.1/> .
@prefix bfo: <http://purl.obolibrary.org/obo/> .
@base <http://proethica.org/ontology/intermediate> .

<http://proethica.org/ontology/intermediate> rdf:type owl:Ontology ;
    owl:imports <http://purl.obolibrary.org/obo/bfo.owl> ;
    rdfs:label "ProEthica Intermediate Ontology"@en ;
    rdfs:comment "A mid-level ontology bridging BFO to domain-specific ethical frameworks"@en ;
    dc:creator "ProEthica AI"@en ;
    dc:date "2025-05-31"^^xsd:date .

#################################################################
#    Core Ethical Modeling Concepts                              
#################################################################

# Declare key types needed by the OntologyMCPServer for entity extraction
:EntityType rdf:type owl:Class ;
    rdfs:label "Entity Type"@en ;
    rdfs:comment "Meta-class for entity types recognized by the ProEthica system"@en .

# New supertype for guideline concept extraction
:GuidelineConceptType rdf:type owl:Class ;
    rdfs:subClassOf :EntityType ;
    rdfs:label "Guideline Concept Type"@en ;
    rdfs:comment "A type of entity specifically extracted from ethical guidelines and standards. These are the eight core categories used for concept extraction from guideline documents."@en .

# The 8 Guideline Concept Types

:Role rdf:type owl:Class ;
    rdf:type :EntityType ;
    rdf:type :GuidelineConceptType ;
    rdfs:subClassOf bfo:BFO_0000023 ; # role from BFO
    rdfs:label "Role"@en ;
    rdfs:comment "A socially recognized status borne by an agent that is defined by: (1) central ends/goals that guide action within the practice, and (2) a coherent set of norms and commitments (obligations) internal to that practice. Professional roles (e.g., Engineer, Project Manager, Public Official) pursue their characteristic ends while being governed by obligations typically formalized in codes of ethics and standards. Participant roles (e.g., Client, Community Member) may be stakeholders without professional obligations. Use hasObligation to relate Roles to obligations, adheresToPrinciple for governing principles, and pursuesEnd for characteristic ends/goals."@en .

:Principle rdf:type owl:Class ;
    rdf:type :EntityType ;
    rdf:type :GuidelineConceptType ;
    rdfs:subClassOf bfo:BFO_0000031 ; # generically dependent continuant
    rdfs:label "Principle"@en ;
    rdfs:comment "A fundamental ethical value or belief that guides professional conduct. Examples include Honesty, Integrity, Sustainability, Justice."@en .

:Obligation rdf:type owl:Class ;
    rdf:type :EntityType ;
    rdf:type :GuidelineConceptType ;
    rdfs:subClassOf bfo:BFO_0000017 ; # realizable entity
    rdfs:label "Obligation"@en ;
    rdfs:comment "A professional duty or responsibility that must be fulfilled. Examples include Public Safety, Confidentiality, Competent Practice, Truthful Reporting."@en .

:State rdf:type owl:Class ;
    rdf:type :EntityType ;
    rdf:type :GuidelineConceptType ;
    rdfs:subClassOf bfo:BFO_0000019 ; # quality from BFO
    rdfs:label "State"@en ;
    rdfs:comment "A condition, situation, or state of affairs that provides context for ethical decision-making, including environmental conditions, organizational states, and contextual constraints. Examples include Budget Constraints, Safety Hazard, Time Pressure, Regulatory Compliance."@en .

:Resource rdf:type owl:Class ;
    rdf:type :EntityType ;
    rdf:type :GuidelineConceptType ;
    rdfs:subClassOf bfo:BFO_0000001 ; # entity (allows both material and informational resources)
    rdfs:label "Resource"@en ;
    rdfs:comment "A physical or informational entity used in ethical scenarios. Examples include Technical Specifications, Safety Equipment, Project Budget, Design Documents."@en .

:Action rdf:type owl:Class ;
    rdf:type :EntityType ;
    rdf:type :GuidelineConceptType ;
    rdfs:subClassOf bfo:BFO_0000015 ; # process from BFO
    rdfs:label "Action"@en ;
    rdfs:comment "An intentional activity performed by an agent in an ethical scenario. Examples include Report Safety Concern, Review Design, Disclose Conflict, Consult Expert."@en .

:Event rdf:type owl:Class ;
    rdf:type :EntityType ;
    rdf:type :GuidelineConceptType ;
    rdfs:subClassOf bfo:BFO_0000015 ; # process from BFO
    rdfs:label "Event"@en ;
    rdfs:comment "An occurrence or happening in an ethical scenario. Examples include Project Milestone, Safety Incident, Audit Finding, Contract Signing."@en .

:Capability rdf:type owl:Class ;
    rdf:type :EntityType ;
    rdf:type :GuidelineConceptType ;
    rdfs:subClassOf bfo:BFO_0000016 ; # disposition from BFO
    rdfs:label "Capability"@en ;
    rdfs:comment "A skill, ability, or competency that can be realized in professional contexts. Examples include Technical Design, Project Management, Risk Assessment, Ethical Reasoning."@en .

:Constraint rdf:type owl:Class ;
    rdf:type :EntityType ;
    rdf:type :GuidelineConceptType ;
    rdfs:subClassOf bfo:BFO_0000017 ; # realizable entity from BFO
    rdfs:label "Constraint"@en ;
    rdfs:comment "A boundary condition, limitation, or requirement that restricts or governs the world state. Examples include Time Constraints, Budget Constraints, License Requirements, Experience Requirements, Safety Standards, Compliance Requirements."@en .

# Legacy type references (maintained for backward compatibility)
:Condition rdfs:subClassOf :State ;
    rdfs:label "Condition"@en ;
    rdfs:comment "Legacy term for State. Use State instead for new concepts."@en ;
    owl:deprecated true .

:ConditionType rdf:type owl:Class ;
    rdfs:label "Condition Type"@en ;
    rdfs:comment "Legacy meta-class. Use State instead."@en ;
    owl:deprecated true .

# Meta-classes for subtypes (not GuidelineConceptTypes themselves)
:ResourceType rdf:type owl:Class ;
    rdfs:subClassOf :EntityType ;
    rdfs:label "Resource Type"@en ;
    rdfs:comment "Meta-class for specific resource types recognized by the ProEthica system"@en .

:EventType rdf:type owl:Class ;
    rdfs:subClassOf :EntityType ;
    rdfs:label "Event Type"@en ;
    rdfs:comment "Meta-class for specific event types recognized by the ProEthica system"@en .

:ActionType rdf:type owl:Class ;
    rdfs:subClassOf :EntityType ;
    rdfs:label "Action Type"@en ;
    rdfs:comment "Meta-class for specific action types recognized by the ProEthica system"@en .

:CapabilityType rdf:type owl:Class ;
    rdfs:subClassOf :EntityType ;
    rdfs:label "Capability Type"@en ;
    rdfs:comment "Meta-class for specific capability types recognized by the ProEthica system"@en .

# Other important classes
:Decision rdf:type owl:Class ;
    rdf:type :EntityType ;
    rdf:type :ActionType ;
    rdfs:subClassOf :Action ;
    rdfs:label "Decision"@en ;
    rdfs:comment "A choice made by an agent in response to an ethical situation"@en .

# Common Ethical Concepts
:EthicalDilemma rdf:type owl:Class ;
    rdf:type :EntityType ;
    rdfs:subClassOf :State ; # treat dilemmas as contextual states for decision-making
    rdfs:label "Ethical Dilemma"@en ;
    rdfs:comment "A situation involving a difficult ethical choice between competing moral considerations that applies across all professional domains"@en .

:EthicalPrinciple rdf:type owl:Class ;
    rdfs:subClassOf bfo:BFO_0000031 ; # generically dependent continuant
    rdfs:label "Ethical Principle"@en ;
    rdfs:comment "Legacy synonym for Principle. Use :Principle for new concepts."@en ;
    owl:deprecated true ;
    rdfs:seeAlso :Principle .

:ProfessionalObligation rdf:type owl:Class ;
    rdfs:subClassOf bfo:BFO_0000017 ; # realizable entity
    rdfs:subClassOf :Obligation ;
    rdfs:label "Professional Obligation"@en ;
    rdfs:comment "A duty or responsibility arising from professional role or standards"@en .

# Engineering-specific role types
:EngineerRole rdf:type owl:Class ;
    rdf:type :EntityType ;
    rdfs:subClassOf :Role ;
    rdfs:label "Engineer Role"@en ;
    rdfs:comment "A professional role involving engineering practice and responsibilities"@en ;
    rdfs:subClassOf :ProfessionalRole .

# Role specializations for classification of roles mentioned in guidelines and cases
:ProfessionalRole rdf:type owl:Class ;
    rdf:type :EntityType ;
    rdfs:subClassOf :Role ;
    rdfs:label "Professional Role"@en ;
        rdfs:comment "A role within a profession that entails recognized ends/goals of practice (e.g., safeguarding public safety, delivering competent technical solutions) and a coherent set of obligations codified in standards and codes (e.g., NSPE). Often associated with licensure or formal accountability. Examples: Professional Engineer, Project Manager, Public Official."@en ;
        # Professional roles characteristically bear obligations and are governed by codes
        rdfs:subClassOf [ a owl:Restriction ;
                                         owl:onProperty :hasObligation ;
                                         owl:someValuesFrom :Obligation
                                     ] ;
        rdfs:subClassOf [ a owl:Restriction ;
                                         owl:onProperty :governedByCode ;
                                         owl:someValuesFrom :EthicalCode
                                     ] .

:ParticipantRole rdf:type owl:Class ;
    rdf:type :EntityType ;
    rdfs:subClassOf :Role ;
    rdfs:label "Participant Role"@en ;
    rdfs:comment "A role of an involved party or stakeholder that does not itself establish professional obligations (e.g., Client, The Public, Community Member)."@en .

# Alias for clarity when classifying roles extracted from text
:StakeholderRole rdf:type owl:Class ;
    rdf:type :EntityType ;
    rdfs:subClassOf :ParticipantRole ;
    rdfs:label "Stakeholder Role"@en ;
    rdfs:comment "A participant role borne by stakeholders such as Clients, Employers, and the Public. Typically not the bearer of professional obligations, but may be linked to principles in explicit statements."@en .

# Keep ProfessionalRole and ParticipantRole disjoint to avoid mixing semantics
:ProfessionalRole owl:disjointWith :ParticipantRole .

# Ends / Goals of roles
:End rdf:type owl:Class ;
    rdf:type :EntityType ;
    rdfs:subClassOf bfo:BFO_0000031 ; # generically dependent continuant
    rdfs:label "End/Goal"@en ;
    rdfs:comment "A characteristic end or goal toward which a role is directed (e.g., in engineering: protecting public safety, serving the public welfare, providing competent service)."@en .

# Standards and regulatory frameworks
:Standard rdf:type owl:Class ;
    rdf:type :EntityType ;
    rdfs:subClassOf :Resource ;
    rdfs:label "Standard"@en ;
    rdfs:comment "A documented agreement containing technical specifications or criteria for professional practice"@en .

:EthicalCode rdf:type owl:Class ;
    rdf:type :EntityType ;
    rdfs:subClassOf :Principle ;
    rdfs:label "Ethical Code"@en ;
    rdfs:comment "A standard that establishes ethical principles and professional conduct requirements"@en .

# Specialized capability types
:TechnicalCapability rdf:type owl:Class ;
    rdf:type :EntityType ;
    rdfs:subClassOf :Capability ;
    rdfs:label "Technical Capability"@en ;
    rdfs:comment "A specialized technical skill or competency in a professional domain"@en .

# Problem and issue types
:EthicalIssue rdf:type owl:Class ;
    rdf:type :EntityType ;
    rdfs:subClassOf :State ;
    rdfs:label "Ethical Issue"@en ;
    rdfs:comment "A problematic situation involving ethical considerations or conflicts"@en .

# Measurement and assessment types
:Measurement rdf:type owl:Class ;
    rdf:type :EntityType ;
    rdfs:subClassOf :Resource ;
    rdfs:label "Measurement"@en ;
    rdfs:comment "A quantitative or qualitative assessment or evaluation"@en .

#################################################################
#    Normative refinements (subclasses, non-breaking)            
#################################################################

# Modalities (kept as subclasses to avoid new primaries)
:Permission rdf:type owl:Class ;
    rdf:type :EntityType ;
    rdfs:subClassOf :Obligation ;
    rdfs:label "Permission"@en ;
    rdfs:comment "A normative allowance indicating that an action or state is permitted under certain conditions."@en .

:Prohibition rdf:type owl:Class ;
    rdf:type :EntityType ;
    rdfs:subClassOf :Obligation ;
    rdfs:label "Prohibition"@en ;
    rdfs:comment "A normative restriction indicating that an action or state is disallowed."@en .

# Compliance tracking
:Violation rdf:type owl:Class ;
    rdf:type :EntityType ;
    rdfs:subClassOf :Event ;
    rdfs:label "Violation"@en ;
    rdfs:comment "An event indicating that an obligation, prohibition, or standard has been breached."@en .

# Explainability / rationale
:Justification rdf:type owl:Class ;
    rdf:type :EntityType ;
    rdfs:subClassOf :Resource ;
    rdfs:label "Justification"@en ;
    rdfs:comment "A rationale, argument, or evidence artifact supporting a decision or interpretation in an ethical case."@en .

#################################################################
#    Annotation properties                                        
#################################################################

:hasValueLabel rdf:type owl:AnnotationProperty ;
    rdfs:label "has value label"@en ;
    rdfs:comment "Annotation for recording the value-oriented reading of a principle (e.g., 'Integrity', 'Justice')."@en ;
    rdfs:domain :Principle ;
    rdfs:range xsd:string .

#################################################################
#    Object Properties                                           
#################################################################

:hasRole rdf:type owl:ObjectProperty ;
    rdfs:domain bfo:BFO_0000004 ; # independent continuant
    rdfs:range :Role ;
    rdfs:label "has role"@en ;
    rdfs:comment "Relates an entity to a role it bears"@en .

:hasCondition rdf:type owl:ObjectProperty ;
    rdfs:domain bfo:BFO_0000015 ; # process
    rdfs:range :State ;
    rdfs:label "has condition"@en ;
    rdfs:comment "Relates a process to a state that affects it"@en ;
    owl:deprecated true .

:hasState rdf:type owl:ObjectProperty ;
    rdfs:domain bfo:BFO_0000015 ; # process
    rdfs:range :State ;
    rdfs:label "has state"@en ;
    rdfs:comment "Relates a process to a state that affects it"@en .

:hasResource rdf:type owl:ObjectProperty ;
    rdfs:domain bfo:BFO_0000015 ; # process
    rdfs:range :Resource ;
    rdfs:label "has resource"@en ;
    rdfs:comment "Relates a process to a resource it uses"@en .

:performsAction rdf:type owl:ObjectProperty ;
    rdfs:domain bfo:BFO_0000040 ; # material entity
    rdfs:range :Action ;
    rdfs:label "performs action"@en ;
    rdfs:comment "Relates an agent to an action they perform"@en .

:hasCapability rdf:type owl:ObjectProperty ;
    rdfs:domain bfo:BFO_0000040 ; # material entity
    rdfs:range :Capability ;
    rdfs:label "has capability"@en ;
    rdfs:comment "Relates an entity to a capability it possesses"@en .

:guidedByPrinciple rdf:type owl:ObjectProperty ;
    rdfs:domain :Action ;
    rdfs:range :Principle ;
    rdfs:label "guided by principle"@en ;
    rdfs:comment "Relates an action to a principle that guides it"@en .

:fulfillsObligation rdf:type owl:ObjectProperty ;
    rdfs:domain :Action ;
    rdfs:range :Obligation ;
    rdfs:label "fulfills obligation"@en ;
    rdfs:comment "Relates an action to an obligation it fulfills"@en .

# Properties connecting roles to obligations and principles
:hasObligation rdf:type owl:ObjectProperty ;
    rdfs:domain :Role ;
    rdfs:range :Obligation ;
    rdfs:label "has obligation"@en ;
    rdfs:comment "Relates a role to the professional obligations borne by entities bearing that role"@en .

:adheresToPrinciple rdf:type owl:ObjectProperty ;
    rdfs:domain :Role ;
    rdfs:range :Principle ;
    rdfs:label "adheres to principle"@en ;
    rdfs:comment "Relates a role to ethical principles that normatively govern that role"@en .

:pursuesEnd rdf:type owl:ObjectProperty ;
    rdfs:domain :Role ;
    rdfs:range :End ;
    rdfs:label "pursues end"@en ;
    rdfs:comment "Relates a role to its characteristic ends/goals."@en .

:governedByCode rdf:type owl:ObjectProperty ;
    rdfs:domain :Role ;
    rdfs:range :EthicalCode ;
    rdfs:label "governed by code"@en ;
    rdfs:comment "Relates a professional role to an ethical code that formalizes its obligations and norms."@en .

#################################################################
#    SPARQL Query Support                                        
#################################################################

# This comment documents the SPARQL query to retrieve all GuidelineConceptTypes:
# SELECT ?type ?label ?comment WHERE {
#   ?type rdf:type :GuidelineConceptType .
#   ?type rdfs:label ?label .
#   OPTIONAL { ?type rdfs:comment ?comment }
# }
# This will return: Role, Principle, Obligation, State, Resource, Action, Event, Capability